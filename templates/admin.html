{% extends "base.html" %}

{% block title %}Admin Panel - Opportunity Portal{% endblock %}

{% block content %}
<div class="container">
    <div class="admin-header">
        <h1>Admin Panel</h1>
        <p>Manage internships, jobs, and notices</p>
    </div>

    <div class="admin-content">
        <div class="admin-form-section">
            <h2>Add New Post</h2>
            <form method="POST" class="admin-form">
                <div class="form-group">
                    <label for="title">Title:</label>
                    <input type="text" id="title" name="title" required>
                </div>

                <div class="form-group">
                    <label for="description">Description:</label>
                    <textarea id="description" name="description" rows="4" required></textarea>
                </div>

                <div class="form-group">
                    <label for="category">Category:</label>
                    <select id="category" name="category" required>
                        {% for category in categories %}
                        <option value="{{ category }}">{{ category|title }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="form-group">
                    <label for="company">Company/Organization (optional):</label>
                    <input type="text" id="company" name="company">
                </div>

                <div class="form-group">
                    <label for="location">Location (optional):</label>
                    <input type="text" id="location" name="location">
                </div>

                <button type="submit" class="btn btn-primary">Add Post</button>
            </form>
        </div>

        <div class="admin-posts-section">
            <h2>Manage Posts ({{ posts|length }})</h2>
            <div class="posts-management">
                {% for post in posts %}
                <div class="managed-post {% if not post.is_active %}inactive{% endif %}">
                    <div class="post-info">
                        <div class="post-header">
                            <span class="post-category {{ post.category }}">{{ post.category|title }}</span>
                            <h3>{{ post.title }}</h3>
                        </div>
                        <p class="post-description">{{ post.description[:100] }}{% if post.description|length > 100 %}...{% endif %}</p>
                        <div class="post-meta">
                            <span>{{ post.date }}</span>
                            {% if post.company %}<span>{{ post.company }}</span>{% endif %}
                        </div>
                    </div>
                    <div class="post-actions">
                        <a href="{{ url_for('toggle_post', post_id=post.id) }}"
                           class="btn btn-sm {% if post.is_active %}btn-warning{% else %}btn-success{% endif %}">
                            {% if post.is_active %}Deactivate{% else %}Activate{% endif %}
                        </a>
                        <a href="{{ url_for('delete_post', post_id=post.id) }}"
                           class="btn btn-sm btn-danger"
                           onclick="return confirm('Are you sure you want to delete this post?')">
                            Delete
                        </a>
                    </div>
                </div>
                {% else %}
                <div class="no-posts">
                    <p>No posts yet. Add your first post above.</p>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}